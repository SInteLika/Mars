import {useEffect, useRef} from "react";

export default function ButtonFill(props) {

    const rhombus = useRef()
    let anim
    useEffect(() => {
        anim = rhombus.current.animate([
            {
                translate: '0 0'
            },
            {
                translate: '0 -5px'
            },
            {
                translate: '0 0'
            }

        ], {
            duration: 1500,
            easing: 'ease-out',
            iterations: Infinity
        })
        anim.pause()
    }, [])


    function startAnimate() {
        anim.play()
        anim.effect.updateTiming({
            iterations: Infinity
        })
    }

    function endAnimate() {
        anim.effect.updateTiming({
            iterations: anim.effect.getComputedTiming().currentIteration + 1
        })
    }

    return (
        <div className={'btn btnFill-wrapper ' + props.className}>
            <svg onMouseEnter={startAnimate}
                 onMouseLeave={endAnimate}
                className={'btnFill'} width="310" height="110" viewBox="0 0 310 110" fill="none"
                 xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M83.93 74.0398H88.79V78.2998C88.79 78.6998 88.84 78.9598 88.94 79.0798C89.06 79.1798 89.32 79.2298 89.72 79.2298H93.59C93.97 79.2298 94.22 79.1798 94.34 79.0798C94.46 78.9598 94.52 78.6998 94.52 78.2998V62.3398H99.38V78.6298C99.38 80.2098 98.59 80.9998 97.01 80.9998H86.3C84.72 80.9998 83.93 80.2098 83.93 78.6298V74.0398ZM114.384 78.2998V69.1498C114.384 68.7698 114.324 68.5198 114.204 68.3998C114.084 68.2798 113.834 68.2198 113.454 68.2198H109.164C108.764 68.2198 108.504 68.2798 108.384 68.3998C108.284 68.5198 108.234 68.7698 108.234 69.1498V78.2998C108.234 78.6998 108.284 78.9598 108.384 79.0798C108.504 79.1798 108.764 79.2298 109.164 79.2298H113.454C113.834 79.2298 114.084 79.1798 114.204 79.0798C114.324 78.9598 114.384 78.6998 114.384 78.2998ZM105.984 66.4498H116.634C118.214 66.4498 119.004 67.2398 119.004 68.8198V78.6298C119.004 80.2098 118.214 80.9998 116.634 80.9998H105.984C104.404 80.9998 103.614 80.2098 103.614 78.6298V68.8198C103.614 67.2398 104.404 66.4498 105.984 66.4498ZM128.077 80.9998H123.427V66.4498H128.077V80.9998ZM123.337 64.0198V60.8998H128.167V64.0198H123.337ZM139.041 66.4498H145.641C147.221 66.4498 148.011 67.2398 148.011 68.8198V80.9998H143.361V69.1498C143.361 68.7698 143.301 68.5198 143.181 68.3998C143.061 68.2798 142.811 68.2198 142.431 68.2198H138.411C137.711 68.2198 137.361 68.5398 137.361 69.1798V70.0798H137.331V80.9998H132.681V66.4498H137.331V67.4398C137.571 66.7798 138.141 66.4498 139.041 66.4498ZM165.314 62.3398V78.2998C165.314 78.6998 165.374 78.9598 165.494 79.0798C165.614 79.1798 165.864 79.2298 166.244 79.2298H171.404C171.784 79.2298 172.034 79.1798 172.154 79.0798C172.274 78.9598 172.334 78.6998 172.334 78.2998V62.3398H177.164V78.6298C177.164 80.2098 176.374 80.9998 174.794 80.9998H162.824C161.244 80.9998 160.454 80.2098 160.454 78.6298V62.3398H165.314ZM191.117 78.3298V75.5698C191.117 75.1898 191.057 74.9398 190.937 74.8198C190.837 74.6998 190.587 74.6398 190.187 74.6398H183.557C181.977 74.6398 181.187 73.8498 181.187 72.2698V68.8198C181.187 67.2398 181.977 66.4498 183.557 66.4498H193.187C194.767 66.4498 195.557 67.2398 195.557 68.8198V70.7998H191.057V69.1198C191.057 68.7198 190.997 68.4698 190.877 68.3698C190.777 68.2498 190.527 68.1898 190.127 68.1898H186.737C186.357 68.1898 186.107 68.2498 185.987 68.3698C185.867 68.4698 185.807 68.7198 185.807 69.1198V71.9398C185.807 72.3398 185.867 72.5998 185.987 72.7198C186.107 72.8198 186.357 72.8698 186.737 72.8698H193.367C194.947 72.8698 195.737 73.6598 195.737 75.2398V78.6298C195.737 80.2098 194.947 80.9998 193.367 80.9998H183.647C182.067 80.9998 181.277 80.2098 181.277 78.6298V76.6498H185.807V78.3298C185.807 78.7098 185.867 78.9598 185.987 79.0798C186.107 79.1998 186.357 79.2598 186.737 79.2598H190.187C190.587 79.2598 190.837 79.1998 190.937 79.0798C191.057 78.9598 191.117 78.7098 191.117 78.3298Z"
                    fill="white"/>
                <path fillRule="evenodd" clipRule="evenodd"
                      d="M250.212 29.9998C251.109 29.9998 251.901 30.5288 252.536 31.1631L268.092 46.7194C270.044 48.6721 273.21 48.6721 275.163 46.7194L290.719 31.1631C291.354 30.5288 292.146 29.9998 293.043 29.9998H305C307.761 29.9998 310 32.2383 310 34.9998V105C310 107.761 307.761 110 305 110H5C2.23857 110 0 107.761 0 105V34.9998C0 32.2383 2.23858 29.9998 5 29.9998H250.212Z"
                      fill="url(#paint0_linear_3_395)"/>
                <rect ref={rhombus} x="252" y="19.7991" width="28" height="28" rx="5" transform="rotate(-45 252 19.7991)"
                      fill="url(#paint1_linear_3_395)"/>
                <defs>
                    <linearGradient id="paint0_linear_3_395" x1="2.66406" y1="76.8569" x2="310.031" y2="71.9294"
                                    gradientUnits="userSpaceOnUse">
                        <stop stopColor="#C71458"/>
                        <stop offset="1" stopColor="#FEDF67"/>
                    </linearGradient>
                    <linearGradient id="paint1_linear_3_395" x1="252.241" y1="36.1991" x2="280.009" y2="36.0842"
                                    gradientUnits="userSpaceOnUse">
                        <stop stopColor="#C71458"/>
                        <stop offset="1" stopColor="#FEDF67"/>
                    </linearGradient>
                </defs>
                <text className={'btnFill__text'} x="50%" y="70%" textAnchor={'middle'} fill={'white'}>
                    {props.text}
                </text>
            </svg>
        </div>
    )
}